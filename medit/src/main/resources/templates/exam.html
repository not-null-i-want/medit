<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>환자 목록</title>
<script type="text/javascript"
	src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script defer th:src="@{/assets/js/exam.js}"></script>
<style>
table {
	border-collapse: collapse;
	width: 25%; /* Set the width to 25% of the container */
	margin-top: 20px;
}

table, th, td {
	border: 1px solid #000; /* Add borders to cells and table */
}

.edit-icon {
	position: fixed;
	bottom: 20px;
	right: 20px;
	width: 30px;
	height: 30px;
	background-color: #007bff;
	color: #fff;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
}

.edit-form {
	display: none;
	position: fixed;
	bottom: 70px;
	right: 20px;
	background-color: #fff;
	padding: 10px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.edit-form textarea {
	width: 100%;
	margin-bottom: 10px;
	padding: 8px;
	box-sizing: border-box;
}

.edit-form button {
	background-color: #007bff;
	color: #fff;
	padding: 8px;
	cursor: pointer;
}

.edit-form button:hover {
	background-color: #0056b3;
}
</style>
</head>
<body>

	<!-- Thymeleaf 페이지 -->
	<div>
		<h1>환자 목록</h1>

		<!-- 환자 검색 폼 -->
		<form id="search" th:action="@{/search}" method="get">
			<label for="searchName">환자명 검색: </label> <input type="text"
				id="searchName" name="keyword">
			<button type="submit">검색</button>
		</form>

		<!-- 검색 결과 표시 -->
		<div th:if="${#lists.size(patientsList) > 0}">
			<table>
				<thead>
					<tr>
						<td>No.</td>
						<td>환자명</td>
						<td>담당의사</td>
					</tr>
				</thead>
				<tbody>
					<tr th:each="patient, loop : ${patientsList}" class="test">
						<td th:text="${patient.ptntId}" class="ptntId"></td>
						<td th:text="${patient.ptntName}"></td>
						<td th:text="${patient.doctorId.doctorName}"></td>
					</tr>
				</tbody>
			</table>
			<br>

			<h1>환자 상세정보</h1>
			<table>
				<tr>
					<td>담당의사</td>
					<td id="output-doctorName"></td>
				</tr>
				<tr>
					<td>주소</td>
					<td id="output-ptntAddr"></td>
				</tr>
				<tr>
					<td>생년월일</td>
					<td id="output-ptntBirthdate"></td>
				</tr>
				<tr>
					<td>성별</td>
					<td id="output-ptntGender"></td>
				</tr>
				<tr>
					<td>환자 ID</td>
					<td id="output-ptntId"></td>
				</tr>
				<tr>
					<td>이름</td>
					<td id="output-ptntName"></td>
				</tr>
				<tr>
					<td>전화번호</td>
					<td id="output-ptntPhone"></td>
				</tr>
				<tr>
					<td>환자 유형</td>
					<td id="output-ptntType"></td>
				</tr>
			</table>

			<!-- New Box with Title "진단 날짜" and 5 Rows -->
			<div style="padding: 10px; margin-top: 20px;">
				<h2>진단 날짜</h2>
				<table style="width: 200px; height: 150px;" class="diag" id="AAA">
					<tr>
						<td id="Date1" ></td>
					</tr>
					<tr>
						<td id="Date2"></td>
					</tr>
					<tr>
						<td id="Date3"></td>
					</tr>
					<tr>
						<td id="Date4"></td>
					</tr>
					<tr>
						<td id="Date5"></td>
					</tr>
				</table>
			</div>
		</div>
	</div>

	<div class="memo-container">
		<h1>환자 소견서</h1>

		<div>
			<div>담당의 소견</div>
		</div>

		<form>
			<textarea id="content" rows="15" cols="50"></textarea>
			<br>
			<button >등록</button>
		</form>
	</div>

	<div class="edit-icon" onclick="openEditForm()" >✎</div>
	<!-- 여기가 클릭하면 오픈인가봉가? -->

	<!-- 수정 폼 추가 -->
	<div class="edit-form" >
		<br>
		<textarea id="editContent" rows="10" cols="30"></textarea>
		<button value="테스트" id="writeBtn"></button>
	</div>

	<script>
		function openEditForm() {
			var currentContent = document.getElementById("content").value;
			document.getElementById("editContent").value = currentContent;
			document.querySelector(".edit-form").style.display = "block";
		}
	</script>
</body>
</html>